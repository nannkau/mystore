<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
>
<head>
    <th:block th:replace="/flagments/header::header">
        <title>Chart</title>
    </th:block>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/highcharts-more.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>


</head>
<body class="materialdesign">
<th:block th:replace="/flagments/sidebar::sidebar"></th:block>

<div class="basic-form-area mg-b-15">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12">
                <div class="sparkline12-list shadow-reset mg-t-30">
                    <div class="sparkline12-hd">
                        <div class="main-sparkline12-hd">
                            <h1>Chart</h1>
                            <div class="sparkline12-outline-icon">
                                <span class="sparkline12-collapse-link"><i class="fa fa-chevron-up"></i></span>
                                <span><i class="fa fa-wrench"></i></span>
                                <span class="sparkline12-collapse-close"><i class="fa fa-times"></i></span>
                            </div>
                        </div>
                    </div>
                    <div class="sparkline12-graph">

                        <figure class="highcharts-figure">
                            <div id="container"></div>
                            <p class="highcharts-description">
                                Biểu đồ thống kê doanh thu theo từng tháng
                            </p>

                            <button id="plain">Plain</button>
                            <button id="inverted">Inverted</button>
                            <button id="polar">Polar</button>
                        </figure>
                    <br/>
                        <div class="row">
                            <div class="col-lg-2">

                            </div>
                            <div class="col-lg-8">
                                <b>bảng thống kê chi tiết</b>
                                <table class="table">
                                    <tr>
                                        <th>
                                            Tháng
                                        </th>

                                        <th>
                                            Số đơn hàng
                                        </th>
                                        <th>
                                            Doanh thu
                                        </th>
                                        <th>
                                            Thao tác
                                        </th>
                                    </tr>
                                    <tr th:each=" t ,count:${listInvoiceByMonth}" style="text-align: center;">
                                        <th scope="row" th:text="${t.getKey()}"></th>
                                        <td th:text="${t.getValue().size()}"></td>
                                        <td th:text="${#numbers.formatDecimal(dt[__${count.index}__], 0, 'COMMA', 2, 'POINT')}"></td>
                                        <td><a th:href="@{'/admin/statistical/detail/month/' + ${t.getKey()}}"> <button class="btn btn-white btn-xs"><i class="fa fa-amazon"></i> Xem chi tiết</button></a></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td>Tổng doanh thu:</td>
                                        <td th:text="${#numbers.formatDecimal(tdt, 0, 'COMMA', 2, 'POINT')}"></td>
                                        <td></td>
                                    </tr>
                                </table>
                            </div>
                            <div class="col-lg-2">

                            </div>
                        </div>

                    </div>


                </div>
            </div>
        </div>
    </div>
</div>
<script>
    function myFunction() {
        var x = document.getElementById("password");
        if (x.type === "password") {
            x.type = "text";
        } else {
            x.type = "password";
        }
    }
    $.ajax({
         type: "get",
         url:"statistical/getdata",
         async: true,
         dataType: "json",
         contentType: "application/json",
         success: function( response ) {

             var d = response.data;
             var chart = Highcharts.chart('container', {

                 title: {
                     text: 'Doanh thu '
                 },

                 subtitle: {
                     text: ''
                 },

                 xAxis: {
                     categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
                 },yAxis: {
                     min: 0,
                     title: {
                         text: 'Triệu VND'
                     }
                 },

                 series: [{
                     name:"Doanh Thu",
                     type: 'column',
                     colorByPoint: true,
                     data: d,
                     showInLegend: false
                 }]

             });


             $('#plain').click(function () {
                 chart.update({
                     chart: {
                         inverted: false,
                         polar: false
                     },
                     subtitle: {
                         text: 'Plain'
                     }
                 });
             });

             $('#inverted').click(function () {
                 chart.update({
                     chart: {
                         inverted: true,
                         polar: false
                     },
                     subtitle: {
                         text: 'Inverted'
                     }
                 });
             });

             $('#polar').click(function () {
                 chart.update({
                     chart: {
                         inverted: false,
                         polar: true
                     },
                     subtitle: {
                         text: 'Polar'
                     }
                 });
             });
         }

     });





</script>

<th:block th:replace="/flagments/footer::footer"></th:block>
</body>
</html>